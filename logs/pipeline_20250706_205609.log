
=== Pipeline started at: 2025-07-06T20:56:09-07:00 ===
ğŸ¬ Burns - Audio to Ken Burns Video Pipeline
============================================================
âœ… Found audio file: cooper.mp3
ğŸ“Š File size: 6.68 MB

ğŸš€ Initializing video generator...
ğŸ¬ Local Video Service initialized
  ğŸ“ Temp directory: /var/folders/h6/gt987qh93hs085p28xhy8z840000gn/T/d20250706-28298-4e2yq3
  ğŸ¥ FFmpeg path: ffmpeg

âš™ï¸  Generation options:
  ğŸ“ Resolution: 1080p
  ğŸ¬ FPS: 24
  ğŸ­ Ken Burns Effect: true
  ğŸ”„ Smooth Transitions: true
  â±ï¸  Image Duration: 3.0s
  ğŸŒŠ Transition Duration: 1.0s
  ğŸ” Zoom Factor: 1.2x
  ğŸ“¹ Pan Speed: 0.5
  ğŸ’¾ Image Caching: true
  ğŸ’¾ Transcription Caching: false
  ğŸ’¾ Analysis Caching: false
  ğŸ”„ Force Refresh: true

============================================================
ğŸ¬ STARTING KEN BURNS VIDEO GENERATION
============================================================

ğŸ“ Step 1: Processing audio and transcription...
ğŸµ Transcribing audio content...
ğŸ¬ Starting Ken Burns video generation
  ğŸ“ Audio file: cooper.mp3
  ğŸ†” Project ID: cooper
  âš™ï¸  Options: {:resolution=>"1080p", :fps=>24, :test_mode=>false, :ken_burns_effect=>true, :smooth_transitions=>true, :image_duration=>3.0, :transition_duration=>1.0, :zoom_factor=>1.2, :pan_speed=>0.5, :cache_images=>true, :cache_transcription=>false, :cache_analysis=>false, :force=>true}

ğŸ“ Step 1: Transcribing audio to get text segments...
  ğŸ¤ Processing audio with Whisper...
  ğŸµ Processing audio file...
    ğŸ¤ Processing audio with AudioProcessor...
ğŸ¤ Processing audio file: cooper.mp3
    ğŸ“ Using cached transcription from: cache/cooper.json
âœ… Transcription completed: 142 segments
ğŸ“Š Total duration: 629.086 seconds
ğŸ“ Total words: 0
ğŸ“¤ Uploading audio file: cooper.mp3
âœ… Audio file uploaded: s3://burns-videos/projects/cooper/audio/cooper.mp3
  âœ… Transcription complete: 142 segments

ğŸ¨ Step 2: Analyzing text content to generate image queries...
  ğŸ§  Analyzing content with Gemini to generate image queries...
  ğŸ¨ Analyzing content for image generation...
ğŸ¨ Analyzing content for image generation...
ğŸ§  Analyzing content for image generation using Gemini...
  ğŸ“ Analyzing 142 segments in batches of 10...
    ğŸ”„ Processing batch 1/15 (10 segments)
    ğŸ”„ Processing batch 2/15 (10 segments)
    ğŸ”„ Processing batch 3/15 (10 segments)
    ğŸ”„ Processing batch 4/15 (10 segments)
    ğŸ”„ Processing batch 5/15 (10 segments)
    ğŸ”„ Processing batch 6/15 (10 segments)
    ğŸ”„ Processing batch 7/15 (10 segments)
    ğŸ”„ Processing batch 8/15 (10 segments)
    ğŸ”„ Processing batch 9/15 (10 segments)
    ğŸ”„ Processing batch 10/15 (10 segments)
    ğŸ”„ Processing batch 11/15 (10 segments)
    ğŸ”„ Processing batch 12/15 (10 segments)
    ğŸ”„ Processing batch 13/15 (10 segments)
    ğŸ”„ Processing batch 14/15 (10 segments)
    ğŸ”„ Processing batch 15/15 (2 segments)
    ğŸ’¾ Caching content analysis to: cache/gemini_analysis_4cd505ea14f12cd2fe8acba3e0e7640a.json
âœ… Content analysis completed: 142 segments processed
âœ… Content analysis completed:
  ğŸ“Š Total segments: 142
  ğŸ–¼ï¸  Segments with images: 70
  ğŸ” Total image queries: 70
  ğŸ“ˆ Average confidence: -0.158
  âœ… Analysis complete: 70 image queries generated

ğŸ–¼ï¸  Step 3: Generating images using the queries...
  ğŸ” Searching for images using image service providers...
  ğŸ–¼ï¸  Generating images for segments...
    ğŸ“ Processing segment: 0
    ğŸ“ Processing segment: 0
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 1
    ğŸ“ Processing segment: 1
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 2
    ğŸ“ Processing segment: 2
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 3
    ğŸ“ Processing segment: 3
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 4
    ğŸ“ Processing segment: 4
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 5
    ğŸ“ Processing segment: 5
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 6
    ğŸ“ Processing segment: 6
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 7
    ğŸ“ Processing segment: 7
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 8
    ğŸ“ Processing segment: 8
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 9
    ğŸ“ Processing segment: 9
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 10
    ğŸ“ Processing segment: 10
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 11
    ğŸ“ Processing segment: 11
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 12
    ğŸ“ Processing segment: 12
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 13
    ğŸ“ Processing segment: 13
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 14
    ğŸ“ Processing segment: 14
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 15
    ğŸ“ Processing segment: 15
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 16
    ğŸ“ Processing segment: 16
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 17
    ğŸ“ Processing segment: 17
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 18
    ğŸ“ Processing segment: 18
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 19
    ğŸ“ Processing segment: 19
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: []
      Debug - final image_queries: []
      âš ï¸  No image queries for segment
      âœ… Generated 0 images
    ğŸ“ Processing segment: 20
    ğŸ“ Processing segment: 20
      Debug - segment keys: [:id, :start_time, :end_time, :text, :confidence, :no_speech_prob, :compression_ratio, :words, :image_queries, :has_images]
      Debug - image_queries: ["colleagues in office meeting"]
      Debug - final image_queries: ["colleagues in office meeting"]

============================================================
âŒ VIDEO GENERATION FAILED
============================================================
Error: Step 3 failed - Image generation: Image generation error: undefined method `mkdir_p' for Dir:Class

    Dir.mkdir_p(cache_dir) unless Dir.exist?(cache_dir)
       ^^^^^^^^
Did you mean?  mkdir

ğŸ”§ Troubleshooting tips:
  â€¢ Check your API keys are properly configured
  â€¢ Ensure AWS services are accessible
  â€¢ Verify the audio file is in a supported format
  â€¢ Check network connectivity
  â€¢ Try running with test_mode: true for debugging
============================================================
