
=== Pipeline started at: 2025-07-07T11:10:46-07:00 ===
ğŸ¬ Burns - Audio to Ken Burns Video Pipeline
============================================================
ğŸ” Checking for existing video in S3...
ğŸ†• No existing video found in S3, generating new video...
âœ… Found audio file: b3.mp3
ğŸ“Š File size: 5.31 MB

ğŸš€ Initializing video generator...
ğŸ¬ Local Video Service initialized
  ğŸ“ Temp directory: /var/folders/h6/gt987qh93hs085p28xhy8z840000gn/T/d20250707-45183-r1003u
  ğŸ¥ FFmpeg path: ffmpeg

âš™ï¸  Generation options:
  ğŸ“ Resolution: 1080p
  ğŸ¬ FPS: 24
  ğŸ­ Ken Burns Effect: true
  ğŸ”„ Smooth Transitions: true
  â±ï¸  Image Duration: 3.0s
  ğŸŒŠ Transition Duration: 1.0s
  ğŸ” Zoom Factor: 1.2x
  ğŸ“¹ Pan Speed: 0.5
  ğŸ’¾ Image Caching: true
  ğŸ’¾ Transcription Caching: true
  ğŸ’¾ Analysis Caching: false
  ğŸ”„ Force Refresh: true

============================================================
ğŸ¬ STARTING KEN BURNS VIDEO GENERATION
============================================================

ğŸ“ Step 1: Processing audio and transcription...
ğŸµ Transcribing audio content...
â±ï¸  Step 1 started at: 11:10:47
ğŸ¬ Starting Ken Burns video generation
  ğŸ“ Audio file: b3.mp3
  ğŸ†” Project ID: b3
  âš™ï¸  Options: {:resolution=>"1080p", :fps=>24, :test_mode=>false, :ken_burns_effect=>true, :smooth_transitions=>true, :image_duration=>3.0, :transition_duration=>1.0, :zoom_factor=>1.2, :pan_speed=>0.5, :cache_images=>true, :cache_transcription=>true, :cache_analysis=>false, :force=>true}

ğŸ“ Step 1: Transcribing audio to get text segments...
  ğŸ¤ Processing audio with Whisper...
  ğŸµ Processing audio file...
    ğŸ¤ Processing audio with AudioProcessor...
ğŸ¤ Processing audio file: b3.mp3
    ğŸ“ Using cached transcription from: cache/b3.json
âœ… Transcription completed: 0 segments
ğŸ“Š Total duration: 0 seconds
ğŸ“ Total words: 0
ğŸ“¤ Uploading audio file: b3.mp3
âœ… Audio file uploaded: s3://burns-videos/projects/b3/audio/b3.mp3
  âœ… Transcription complete: 0 segments

ğŸ¨ Step 2: Analyzing text content to generate image queries...
  ğŸ§  Analyzing content with Gemini to generate image queries...
  ğŸ¨ Analyzing content for image generation...
ğŸ¨ Analyzing content for image generation...
ğŸ§  Analyzing content for image generation using Gemini...
  ğŸ“ Analyzing 0 segments in batches of 10...
    ğŸ’¾ Caching content analysis to: cache/gemini_analysis_2a8a43b4f13c0cbe9693f8a7d8b98a9b.json
âœ… Content analysis completed: 0 segments processed
âœ… Content analysis completed:
  ğŸ“Š Total segments: 0
  ğŸ–¼ï¸  Segments with images: 0
  ğŸ” Total image queries: 0
  ğŸ“ˆ Average confidence: 0
  âœ… Analysis complete: 0 image queries generated

ğŸ–¼ï¸  Step 3: Generating images using the queries...
  ğŸ” Searching for images using image service providers...
  ğŸ–¼ï¸  Generating images for segments...
  âœ… Image generation complete: 0 images found

ğŸ“‹ Step 4: Creating project manifest with all data...
  ğŸ“‹ Creating project manifest...
ğŸ“¤ Uploading project manifest: b3
âœ… Project manifest uploaded: s3://burns-videos/projects/b3/manifest.json
  âœ… Manifest created successfully

ğŸ¥ Step 5: Generating final Ken Burns video...
  ğŸ¥ Generating final video using AWS Lambda for parallel processing...
ğŸ“¥ Getting project manifest: b3
âœ… Project manifest retrieved: s3://burns-videos/projects/b3/manifest.json
    ğŸ“ Processing 0 segments concurrently...
ğŸš€ Generating video segments concurrently for project: b3
  ğŸ“ Segments: 0
  âš¡ Concurrency: 0 (conservative to prevent Lambda /tmp issues)
âŒ Error in concurrent video generation: number of threads must be greater than zero
â±ï¸  Step 1 completed at: 11:10:50
â±ï¸  Step 1 runtime: 3.7 seconds

============================================================
âŒ VIDEO GENERATION FAILED
============================================================
Error: Step 5 failed - Video generation: Lambda video generation failed: number of threads must be greater than zero

ğŸ”§ Troubleshooting tips:
  â€¢ Check your API keys are properly configured
  â€¢ Ensure AWS services are accessible
  â€¢ Verify the audio file is in a supported format
  â€¢ Check network connectivity
  â€¢ Try running with test_mode: true for debugging
============================================================
