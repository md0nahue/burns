
=== Pipeline started at: 2025-07-06T20:29:49-07:00 ===
ğŸ¬ Burns - Audio to Ken Burns Video Pipeline
============================================================
âœ… Found audio file: happy.m4a
ğŸ“Š File size: 17.95 MB

ğŸš€ Initializing video generator...
ğŸ¬ Local Video Service initialized
  ğŸ“ Temp directory: /var/folders/h6/gt987qh93hs085p28xhy8z840000gn/T/d20250706-26651-iecdzd
  ğŸ¥ FFmpeg path: ffmpeg

âš™ï¸  Generation options:
  ğŸ“ Resolution: 1080p
  ğŸ¬ FPS: 24
  ğŸ­ Ken Burns Effect: true
  ğŸ”„ Smooth Transitions: true
  â±ï¸  Image Duration: 3.0s
  ğŸŒŠ Transition Duration: 1.0s
  ğŸ” Zoom Factor: 1.2x
  ğŸ“¹ Pan Speed: 0.5
  ğŸ’¾ Image Caching: true
  ğŸ’¾ Transcription Caching: true
  ğŸ’¾ Analysis Caching: true

============================================================
ğŸ¬ STARTING KEN BURNS VIDEO GENERATION
============================================================

ğŸ“ Step 1: Processing audio and transcription...
ğŸµ Transcribing audio content...
ğŸ¬ Starting Ken Burns video generation
  ğŸ“ Audio file: happy.m4a
  ğŸ†” Project ID: happy
  âš™ï¸  Options: {:resolution=>"1080p", :fps=>24, :test_mode=>false, :ken_burns_effect=>true, :smooth_transitions=>true, :image_duration=>3.0, :transition_duration=>1.0, :zoom_factor=>1.2, :pan_speed=>0.5, :cache_images=>true, :cache_transcription=>true, :cache_analysis=>true}

ğŸ“ Step 1: Processing audio and transcription...
  ğŸ’¾ Using cached transcription from S3

ğŸ¨ Step 2: Analyzing content and generating image queries...
  ğŸ’¾ Using cached image analysis from S3

ğŸ–¼ï¸  Step 3: Generating images for segments...
  ğŸ’¾ Using cached image generation from S3

ğŸ“‹ Step 4: Creating project manifest...
  ğŸ’¾ Using cached manifest from S3
ğŸ“¥ Getting project manifest: happy
âœ… Project manifest retrieved: s3://burns-videos/projects/happy/manifest.json

ğŸ¥ Step 5: Generating final Ken Burns video...
  ğŸ¥ Generating final video using AWS Lambda for parallel processing...
ğŸ“¥ Getting project manifest: happy
âœ… Project manifest retrieved: s3://burns-videos/projects/happy/manifest.json
    ğŸ“ Processing 137 segments concurrently...
ğŸš€ Generating video segments concurrently for project: happy
  ğŸ“ Segments: 137
  âš¡ Concurrency: 50 (unlimited Lambda scaling)
    Debug - Segment 0: id=0, start_time=0, end_time=5.28
    Warning - Segment 0 has no images, skipping
    Debug - Segment 1: id=1, start_time=5.28, end_time=11.6
    Warning - Segment 1 has no images, skipping
    Debug - Segment 2: id=2, start_time=12.08, end_time=18.14
    Warning - Segment 2 has no images, skipping
    Debug - Segment 3: id=3, start_time=18.14, end_time=25.54
    Warning - Segment 3 has no images, skipping
    Debug - Segment 4: id=4, start_time=25.54, end_time=27.54
    Warning - Segment 4 has no images, skipping
    Debug - Segment 5: id=5, start_time=27.86, end_time=28.72
    Warning - Segment 5 has no images, skipping
    Debug - Segment 6: id=6, start_time=28.84, end_time=31.66
    Warning - Segment 6 has no images, skipping
    Debug - Segment 7: id=7, start_time=31.66, end_time=32.44
    Warning - Segment 7 has no images, skipping
    Debug - Segment 8: id=8, start_time=32.58, end_time=34.78
    Warning - Segment 8 has no images, skipping
    Debug - Segment 9: id=9, start_time=34.86, end_time=36.38
    Warning - Segment 9 has no images, skipping
    Debug - Segment 10: id=10, start_time=36.72, end_time=37.66
    Warning - Segment 10 has no images, skipping
    Debug - Segment 11: id=11, start_time=37.74, end_time=38.4
    Warning - Segment 11 has no images, skipping
    Debug - Segment 12: id=12, start_time=38.78, end_time=40.56
    Warning - Segment 12 has no images, skipping
    Debug - Segment 13: id=13, start_time=40.62, end_time=41.22
    Warning - Segment 13 has no images, skipping
    Debug - Segment 14: id=14, start_time=41.32, end_time=42.74
    Warning - Segment 14 has no images, skipping
    Debug - Segment 15: id=15, start_time=43.52, end_time=46.98
    Warning - Segment 15 has no images, skipping
    Debug - Segment 16: id=16, start_time=47.5, end_time=48.2
    Warning - Segment 16 has no images, skipping
    Debug - Segment 17: id=17, start_time=48.26, end_time=48.94
    Warning - Segment 17 has no images, skipping
    Debug - Segment 18: id=18, start_time=48.94, end_time=50.72
    Warning - Segment 18 has no images, skipping
    Debug - Segment 19: id=19, start_time=50.94, end_time=52.6
    Warning - Segment 19 has no images, skipping
    Debug - Segment 20: id=20, start_time=52.7, end_time=53.8
    Warning - Segment 20 has no images, skipping
    Debug - Segment 21: id=21, start_time=53.8, end_time=55.14
    Warning - Segment 21 has no images, skipping
    Debug - Segment 22: id=22, start_time=55.14, end_time=56.68
    Warning - Segment 22 has no images, skipping
    Debug - Segment 23: id=23, start_time=56.68, end_time=58.02
    Warning - Segment 23 has no images, skipping
    Debug - Segment 24: id=24, start_time=58.02, end_time=58.68
    Warning - Segment 24 has no images, skipping
    Debug - Segment 25: id=25, start_time=58.68, end_time=60.52
    Warning - Segment 25 has no images, skipping
    Debug - Segment 26: id=26, start_time=61.06, end_time=67.78
    Warning - Segment 26 has no images, skipping
    Debug - Segment 27: id=27, start_time=68.04, end_time=69.58
    Warning - Segment 27 has no images, skipping
    Debug - Segment 28: id=28, start_time=70.32, end_time=71.54
    Warning - Segment 28 has no images, skipping
    Debug - Segment 29: id=29, start_time=71.76, end_time=73.46
    Warning - Segment 29 has no images, skipping
    Debug - Segment 30: id=30, start_time=74.02, end_time=75.32
    Warning - Segment 30 has no images, skipping
    Debug - Segment 31: id=31, start_time=75.5, end_time=77.06
    Warning - Segment 31 has no images, skipping
    Debug - Segment 32: id=32, start_time=77.46, end_time=79.2
    Warning - Segment 32 has no images, skipping
    Debug - Segment 33: id=33, start_time=79.26, end_time=81.88
    Warning - Segment 33 has no images, skipping
    Debug - Segment 34: id=34, start_time=82.16, end_time=84.96
    Warning - Segment 34 has no images, skipping
    Debug - Segment 35: id=35, start_time=84.96, end_time=85.96
    Warning - Segment 35 has no images, skipping
    Debug - Segment 36: id=36, start_time=85.96, end_time=86.96
    Warning - Segment 36 has no images, skipping
    Debug - Segment 37: id=37, start_time=86.96, end_time=87.96
    Warning - Segment 37 has no images, skipping
    Debug - Segment 38: id=38, start_time=87.96, end_time=88.96
    Warning - Segment 38 has no images, skipping
    Debug - Segment 39: id=39, start_time=88.96, end_time=90.96
    Warning - Segment 39 has no images, skipping
    Debug - Segment 40: id=40, start_time=90.96, end_time=93.96
    Warning - Segment 40 has no images, skipping
    Debug - Segment 41: id=41, start_time=93.96, end_time=94.96
    Warning - Segment 41 has no images, skipping
    Debug - Segment 42: id=42, start_time=94.96, end_time=95.96
    Warning - Segment 42 has no images, skipping
    Debug - Segment 43: id=43, start_time=95.96, end_time=96.96
    Warning - Segment 43 has no images, skipping
    Debug - Segment 44: id=44, start_time=96.96, end_time=102.96
    Warning - Segment 44 has no images, skipping
    Debug - Segment 45: id=45, start_time=102.96, end_time=103.96
    Warning - Segment 45 has no images, skipping
    Debug - Segment 46: id=46, start_time=103.96, end_time=104.96
    Warning - Segment 46 has no images, skipping
    Debug - Segment 47: id=47, start_time=104.96, end_time=105.96
    Warning - Segment 47 has no images, skipping
    Debug - Segment 48: id=48, start_time=105.96, end_time=106.96
    Warning - Segment 48 has no images, skipping
    Debug - Segment 49: id=49, start_time=106.96, end_time=107.96
    Warning - Segment 49 has no images, skipping
    Debug - Segment 50: id=50, start_time=107.96, end_time=109.96
    Warning - Segment 50 has no images, skipping
    Debug - Segment 51: id=51, start_time=109.96, end_time=110.96
    Warning - Segment 51 has no images, skipping
    Debug - Segment 52: id=52, start_time=110.96, end_time=111.96
    Warning - Segment 52 has no images, skipping
    Debug - Segment 53: id=53, start_time=111.96, end_time=113.96
    Warning - Segment 53 has no images, skipping
    Debug - Segment 54: id=54, start_time=113.96, end_time=117.72
    Warning - Segment 54 has no images, skipping
    Debug - Segment 55: id=55, start_time=119.42, end_time=124.74
    Warning - Segment 55 has no images, skipping
    Debug - Segment 56: id=56, start_time=128.06, end_time=130.06
    Warning - Segment 56 has no images, skipping
    Debug - Segment 57: id=57, start_time=130.2, end_time=138.5
    Warning - Segment 57 has no images, skipping
    Debug - Segment 58: id=58, start_time=138.5, end_time=158.04001
    Warning - Segment 58 has no images, skipping
    Debug - Segment 59: id=59, start_time=162.56, end_time=171.68001
    Warning - Segment 59 has no images, skipping
    Debug - Segment 60: id=60, start_time=171.68001, end_time=175.7
    Warning - Segment 60 has no images, skipping
    Debug - Segment 61: id=61, start_time=176.44, end_time=178.72
    Warning - Segment 61 has no images, skipping
    Debug - Segment 62: id=62, start_time=179.3, end_time=186.16
    Warning - Segment 62 has no images, skipping
    Debug - Segment 63: id=63, start_time=186.16, end_time=188.36
    Warning - Segment 63 has no images, skipping
    Debug - Segment 64: id=64, start_time=188.86, end_time=192.36
    Warning - Segment 64 has no images, skipping
    Debug - Segment 65: id=65, start_time=193.52, end_time=197.14
    Warning - Segment 65 has no images, skipping
    Debug - Segment 66: id=66, start_time=197.14, end_time=201.34
    Warning - Segment 66 has no images, skipping
    Debug - Segment 67: id=67, start_time=201.68001, end_time=206.06
    Warning - Segment 67 has no images, skipping
    Debug - Segment 68: id=68, start_time=206.06, end_time=211.36
    Warning - Segment 68 has no images, skipping
    Debug - Segment 69: id=69, start_time=216.92001, end_time=220.96
    Warning - Segment 69 has no images, skipping
    Debug - Segment 70: id=70, start_time=220.96, end_time=227.44
    Warning - Segment 70 has no images, skipping
    Debug - Segment 71: id=71, start_time=227.44, end_time=235.66
    Warning - Segment 71 has no images, skipping
    Debug - Segment 72: id=72, start_time=235.66, end_time=242.44
    Warning - Segment 72 has no images, skipping
    Debug - Segment 73: id=73, start_time=242.44, end_time=248.3
    Warning - Segment 73 has no images, skipping
    Debug - Segment 74: id=74, start_time=248.3, end_time=255.1
    Warning - Segment 74 has no images, skipping
    Debug - Segment 75: id=75, start_time=255.1, end_time=265
    Warning - Segment 75 has no images, skipping
    Debug - Segment 76: id=76, start_time=265.38, end_time=271.94
    Warning - Segment 76 has no images, skipping
    Debug - Segment 77: id=77, start_time=272.41998, end_time=280.84
    Warning - Segment 77 has no images, skipping
    Debug - Segment 78: id=78, start_time=280.84, end_time=283.47998
    Warning - Segment 78 has no images, skipping
    Debug - Segment 79: id=79, start_time=283.47998, end_time=287.8
    Warning - Segment 79 has no images, skipping
    Debug - Segment 80: id=80, start_time=287.8, end_time=291.24
    Warning - Segment 80 has no images, skipping
    Debug - Segment 81: id=81, start_time=291.24, end_time=292.12
    Warning - Segment 81 has no images, skipping
    Debug - Segment 82: id=82, start_time=292.12, end_time=292.6
    Warning - Segment 82 has no images, skipping
    Debug - Segment 83: id=83, start_time=292.6, end_time=302.6
    Warning - Segment 83 has no images, skipping
    Debug - Segment 84: id=84, start_time=306.04, end_time=312.76
    Warning - Segment 84 has no images, skipping
    Debug - Segment 85: id=85, start_time=312.76, end_time=319.72
    Warning - Segment 85 has no images, skipping
    Debug - Segment 86: id=86, start_time=319.72, end_time=326.92
    Warning - Segment 86 has no images, skipping
    Debug - Segment 87: id=87, start_time=326.92, end_time=333.96002
    Warning - Segment 87 has no images, skipping
    Debug - Segment 88: id=88, start_time=333.96002, end_time=340.2
    Warning - Segment 88 has no images, skipping
    Debug - Segment 89: id=89, start_time=340.2, end_time=346.6
    Warning - Segment 89 has no images, skipping
    Debug - Segment 90: id=90, start_time=346.6, end_time=353.22
    Warning - Segment 90 has no images, skipping
    Debug - Segment 91: id=91, start_time=353.22, end_time=361.14
    Warning - Segment 91 has no images, skipping
    Debug - Segment 92: id=92, start_time=361.14, end_time=367.82
    Warning - Segment 92 has no images, skipping
    Debug - Segment 93: id=93, start_time=367.82, end_time=374.88
    Warning - Segment 93 has no images, skipping
    Debug - Segment 94: id=94, start_time=374.88, end_time=379.04
    Warning - Segment 94 has no images, skipping
    Debug - Segment 95: id=95, start_time=404.88, end_time=410.40002
    Warning - Segment 95 has no images, skipping
    Debug - Segment 96: id=96, start_time=410.40002, end_time=414.48
    Warning - Segment 96 has no images, skipping
    Debug - Segment 97: id=97, start_time=414.48, end_time=420.24
    Warning - Segment 97 has no images, skipping
    Debug - Segment 98: id=98, start_time=420.24, end_time=423.44
    Warning - Segment 98 has no images, skipping
    Debug - Segment 99: id=99, start_time=423.44, end_time=428.48
    Warning - Segment 99 has no images, skipping
    Debug - Segment 100: id=100, start_time=428.48, end_time=436.88
    Warning - Segment 100 has no images, skipping
    Debug - Segment 101: id=101, start_time=436.88, end_time=451.69998
    Warning - Segment 101 has no images, skipping
    Debug - Segment 102: id=102, start_time=451.69998, end_time=452.62
    Warning - Segment 102 has no images, skipping
    Debug - Segment 103: id=103, start_time=452.91998, end_time=455.12
    Warning - Segment 103 has no images, skipping
    Debug - Segment 104: id=104, start_time=455.46, end_time=459.13998
    Warning - Segment 104 has no images, skipping
    Debug - Segment 105: id=105, start_time=459.5, end_time=460.13998
    Warning - Segment 105 has no images, skipping
    Debug - Segment 106: id=106, start_time=460.4, end_time=462.34
    Warning - Segment 106 has no images, skipping
    Debug - Segment 107: id=107, start_time=462.5, end_time=465.28
    Warning - Segment 107 has no images, skipping
    Debug - Segment 108: id=108, start_time=466.16, end_time=467.03998
    Warning - Segment 108 has no images, skipping
    Debug - Segment 109: id=109, start_time=467.68, end_time=469.18
    Warning - Segment 109 has no images, skipping
    Debug - Segment 110: id=110, start_time=469.18, end_time=471.36
    Warning - Segment 110 has no images, skipping
    Debug - Segment 111: id=111, start_time=471.4, end_time=476.4
    Warning - Segment 111 has no images, skipping
    Debug - Segment 112: id=112, start_time=477.88, end_time=478.76
    Warning - Segment 112 has no images, skipping
    Debug - Segment 113: id=113, start_time=478.76, end_time=484.52
    Warning - Segment 113 has no images, skipping
    Debug - Segment 114: id=114, start_time=484.84, end_time=488.03998
    Warning - Segment 114 has no images, skipping
    Debug - Segment 115: id=115, start_time=488.76, end_time=495.56
    Warning - Segment 115 has no images, skipping
    Debug - Segment 116: id=116, start_time=495.88, end_time=497.88
    Warning - Segment 116 has no images, skipping
    Debug - Segment 117: id=117, start_time=497.88, end_time=505.52
    Warning - Segment 117 has no images, skipping
    Debug - Segment 118: id=118, start_time=505.9, end_time=512.2
    Warning - Segment 118 has no images, skipping
    Debug - Segment 119: id=119, start_time=512.77997, end_time=517.7
    Warning - Segment 119 has no images, skipping
    Debug - Segment 120: id=120, start_time=521.12, end_time=524.92
    Warning - Segment 120 has no images, skipping
    Debug - Segment 121: id=121, start_time=524.92, end_time=530.38
    Warning - Segment 121 has no images, skipping
    Debug - Segment 122: id=122, start_time=530.38, end_time=536.26
    Warning - Segment 122 has no images, skipping
    Debug - Segment 123: id=123, start_time=536.26, end_time=542.98
    Warning - Segment 123 has no images, skipping
    Debug - Segment 124: id=124, start_time=542.98, end_time=547.83997
    Warning - Segment 124 has no images, skipping
    Debug - Segment 125: id=125, start_time=547.83997, end_time=549.04
    Warning - Segment 125 has no images, skipping
    Debug - Segment 126: id=126, start_time=549.04, end_time=549.58
    Warning - Segment 126 has no images, skipping
    Debug - Segment 127: id=127, start_time=549.58, end_time=550.58
    Warning - Segment 127 has no images, skipping
    Debug - Segment 128: id=128, start_time=550.58, end_time=551.8
    Warning - Segment 128 has no images, skipping
    Debug - Segment 129: id=129, start_time=551.8, end_time=554.6
    Warning - Segment 129 has no images, skipping
    Debug - Segment 130: id=130, start_time=554.6, end_time=557.88
    Warning - Segment 130 has no images, skipping
    Debug - Segment 131: id=131, start_time=557.88, end_time=560.04
    Warning - Segment 131 has no images, skipping
    Debug - Segment 132: id=132, start_time=560.04, end_time=565.8
    Warning - Segment 132 has no images, skipping
    Debug - Segment 133: id=133, start_time=566.44, end_time=570.12
    Warning - Segment 133 has no images, skipping
    Debug - Segment 134: id=134, start_time=570.92, end_time=577.95996
    Warning - Segment 134 has no images, skipping
    Debug - Segment 135: id=135, start_time=577.95996, end_time=586.86
    Warning - Segment 135 has no images, skipping
    Debug - Segment 136: id=136, start_time=588.26, end_time=595.14
    Warning - Segment 136 has no images, skipping
  â³ Waiting for 0 segments to complete...
  ğŸ¬ Combining 0 segments into final video...
  ğŸ¬ Combining segments into final video...
  ğŸ”§ Payload for combination: project_id, segment_results, options
  ğŸ“Š Segment results count: 0
  ğŸ“¤ Invoking Lambda function: ken-burns-video-generator-go
    Debug - Payload keys: project_id, segment_results, options
    Debug - Payload values: String, Array, Hash
    Debug - Response status: 200
    Debug - Response body keys: errorMessage, errorType
    Debug - Lambda error: invalid event format
    Debug - Error type: errorString
    Debug - Stack trace: 
âŒ Final video combination failed: Lambda function error: invalid event format

============================================================
âŒ VIDEO GENERATION FAILED
============================================================
Error: Video generation failed: Lambda video generation failed: Lambda function error: invalid event format

ğŸ”§ Troubleshooting tips:
  â€¢ Check your API keys are properly configured
  â€¢ Ensure AWS services are accessible
  â€¢ Verify the audio file is in a supported format
  â€¢ Check network connectivity
  â€¢ Try running with test_mode: true for debugging
============================================================
